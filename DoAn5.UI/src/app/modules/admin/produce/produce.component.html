<h2 style="text-align: center;"> Quản lý nhà sản xuất</h2>

<p-confirmDialog></p-confirmDialog>
<div class="card">
    <p-table [value]="ListProduces" [lazy]="true" (onLazyLoad)="loadListLazy($event)" [paginator]="true" [rows]="10" [scrollable]="true" scrollHeight="400px"
        [loading]="loading" [showCurrentPageReport]="true" [tableStyle]="{ 'min-width': '50rem' }"
        [totalRecords]="Totalcount" [resizableColumns]="true"
        currentPageReportTemplate="Hiển thị từ {first} đến {last} của {totalRecords} bản ghi" [filterDelay]="0"
        [rowsPerPageOptions]="[5, 10, 20]">
        <ng-template pTemplate="caption">
            <p-button (click)="Add()" icon="pi pi-plus-circle" label="Thêm mới"></p-button>
            <form class="p-input-icon-left frm" (ngSubmit)="onsubmit()">
                <i class="pi pi-search"></i>
                <input type="text" class="p-inputtext" pInputText [(ngModel)]="keyword" placeholder="Tìm kiếm..."
                    [ngModelOptions]="{standalone: true}" />
                <!-- <p-button type="submit" icon="pi pi-search"></p-button> -->
            </form>


        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th style="width:3%;">STT</th>

                <th style="width:15%;">Mã</th>
                <th>Ảnh</th>
                <th>Tên</th>
                <th>Điện thoại</th>
                <th>Email</th>
                <th>Địa chỉ</th>
                <th>Chức năng</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-produce let-rowIndex="rowIndex">
            <tr>
                <td>{{ rowIndex + 1}}</td>

                <td>{{ produce.id }}</td>
                <td><p-image src="https://localhost:7058/Img_Brand/{{ produce.image }}"
                        previewImageSrc="https://localhost:7058/Img_Brand/{{ produce.image }}" alt="Image" width="100"
                        [preview]="true"></p-image></td>
                <!-- <td><img src="https://localhost:7058/Images/{{ produce.image }}" [alt]="produce.name"style="width: 100px;" /></td> -->
                <td>{{ produce.name }}</td>
                <td>{{ produce.phone}}</td>
                <td>{{ produce.email }}</td>
                <td>{{ produce.address }}</td>
                <td>
                    <i class="pi pi-eye" style="color: slateblue; margin-left: 5%;"></i>
                    <i class="pi pi-pencil" style="color: rgb(255, 132, 0); margin-left: 5%;"
                        (click)="Edit(produce)"></i>
                    <i class="pi pi-trash" style="color: red; margin-left: 5%;"
                        (click)="confirm($event,produce.id )"></i>
                </td>



            </tr>
        </ng-template>
        <ng-template pTemplate="paginatorleft">
            <p-button type="button" icon="pi pi-plus" styleClass="p-button-text"></p-button>
        </ng-template>
        <ng-template pTemplate="paginatorright">
            <p-button type="button" icon="pi pi-cloud" styleClass="p-button-text"></p-button>
        </ng-template>
    </p-table>
</div>




<p-dialog header="Long Content" [(visible)]="visible" [modal]="true" [maximizable]="true"
    [style]="{width: '40%',height:'90%'}" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }">
    <ng-template pTemplate="header">
        <div class="dialog-header">
            <span class="font-bold">{{Titile}}</span>
        </div>
    </ng-template>
    <ng-template pTemplate="body">
        <form [formGroup]="formProduce" class="full-width-form">
            <div class="flex card flex justify-content-center">
                <div class="input-container">
                    <label for="name">Tên</label>
                    <div class="dropdown-wrapper">
                        <input type="text" class="p-inputtext" pInputText formControlName="name" />
                    </div>
                </div>
                <div class="input-container">
                    <label for="name">Điện thoại</label>
                    <div class="dropdown-wrapper">
                        <input type="text" class="p-inputtext" pInputText formControlName="phone" />
                    </div>
                </div>
                <div class="input-container">
                    <label for="name">Email</label>
                    <div class="dropdown-wrapper">
                        <input type="text" class="p-inputtext" pInputText formControlName="email" />
                    </div>
                </div>
                <div class="input-container">
                    <label for="name">Địa chỉ</label>
                    <div class="dropdown-wrapper">
                        <input type="text" class="p-inputtext" pInputText formControlName="address" />
                    </div>
                </div>

            </div>
        </form>
        <form [formGroup]="formUpload" class="full-width-form">
            <div class="card flex justify-content-center">
                <label for="name">Ảnh</label>
                <p-fileUpload name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php"
                    (onUpload)="onUpload($event)" [multiple]="true" accept="image/*" [maxFileSize]="1000000">
                    <ng-template pTemplate="content">
                        <ul *ngIf="uploadedFiles.length">
                            <li *ngFor="let file of uploadedFiles">{{ file.name }} - {{ file.size }} bytes</li>
                        </ul>
                    </ng-template>
                </p-fileUpload>
            </div>

        </form>
    </ng-template>
    <ng-template pTemplate="footer">
        <div class="dialog-footer">
            <p-button icon="pi pi-check" *ngIf="formProduce.valid " (click)="SubmitBtn()" label="Lưu" pAutoFocus [autofocus]="true"></p-button>
            <p-button icon="pi pi-check" (click)="close()"  label="Đóng"severity="danger" ></p-button>

        </div>
    </ng-template>
</p-dialog>